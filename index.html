<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>System Dynamics Success to the Successful</title>

<style>
:root {
  --bg:#ffffff; --card:#f8fafc; --ink:#111; --muted:#555;
  --accent-navy:#1e3a8a; --accent-teal:#0d9488; --accent-blue:#2563eb;
  --border:#e5e7eb; --radius:10px;
}
html,body{
  margin:0;padding:0;background:var(--bg);color:var(--ink);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  overflow-y:auto; /* ✅ FIX */
}
.container{max-width:1300px;margin:12px auto;padding:0 12px;}
.title-row{display:flex;gap:14px;align-items:center;}
.title-logo{height:46px;}
h1{font-size:20px;margin:0;color:var(--accent-navy);}
.subtitle{font-size:13px;color:var(--muted);}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:8px;
  margin-top:8px;
}
.button-bar{display:flex;gap:8px;}
button{
  padding:6px 12px;border-radius:999px;
  border:1px solid var(--accent-navy);
  background:#e0ecff;font-size:12px;cursor:pointer;
}
#resetBtn{background:#f1f5f9;border-color:#94a3b8;}
.charts-3{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-top:10px;
}
.chart-box{height:200px;}
canvas{width:100%!important;height:100%!important;}
details{
  margin-top:10px;
  border:1px dashed var(--border);
  border-radius:8px;
  padding:6px 8px;
}
summary{
  cursor:pointer;
  font-weight:600;
  color:var(--accent-navy);
}
.sources{font-size:11px;color:var(--muted);margin-top:8px;}
.sources a{color:#2563eb;}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>
</head>

<body>
<div class="container">

<h1>MIDCARE© Public vs Private Healthcare Coverage SD Model</h1>
<div class="subtitle">Historical data (2014–2023). Simulated 2024–2050.</div>

<div class="card button-bar">
<button id="runBtn">Run from 2024</button>
<button id="resetBtn">Reset</button>
</div>

<div class="charts-3">
<div class="card chart-box"><canvas id="coverageChart"></canvas></div>
<div class="card chart-box"><canvas id="ratioChart"></canvas></div>
<div class="card chart-box"><canvas id="allocationChart"></canvas></div>
</div>

<details>
<summary>Data & Assumptions</summary>
<ul>
<li>Historical coverage from official Irish health statistics (2014–2023).</li>
<li>Model structure follows a success-to-the-successful reinforcing loop.</li>
<li>PHI and MC represent population coverage, not expenditure.</li>
<li>Loss rates represent structural attrition, not policy intervention.</li>
<li>No demographic growth, shocks, or reforms are modeled.</li>
<li>Illustrative dynamics only — not a forecast.</li>
</ul>
</details>

<div class="sources">
<strong>Sources:</strong><br>
Health Insurance Authority (2024). <em>Health Insurance in Ireland: Market Report 2024.</em>
<a href="https://www.hia.ie/sites/default/files/2025-04/hia-market-report-2024.pdf" target="_blank">Link</a><br>
Department of Health (2024). <em>Health in Ireland: Key Trends 2024.</em>
<a href="https://assets.gov.ie/static/documents/chapter-4-primary-care-and-community-service.html" target="_blank">Link</a>
</div>

</div>

<script>
const START=2014,HIST_END=2023,END=2050;
const years=[...Array(END-START+1)].map((_,i)=>START+i);

const histPriv={2014:41.7,2015:42.1,2016:42.4,2017:43.5,2018:45.2,2019:45.7,2020:46.1,2021:46.7,2022:47.2,2023:47.0};
const histPub ={2014:38.1,2015:37.0,2016:35.5,2017:32.9,2018:32.2,2019:31.2,2020:31.5,2021:30.4,2022:30.2,2023:30.5};

const LOSS_P=0.002, LOSS_M=0.04, RES=1.0;
let covChart, ratioChart, allocChart, timer=null;

function buildCharts(){
  const priv=years.map(y=>histPriv[y]??null);
  const pub =years.map(y=>histPub[y]??null);
  const ratio=years.map(y=>histPriv[y]?histPriv[y]/(histPriv[y]+histPub[y]):null);

  covChart=new Chart(document.getElementById("coverageChart"),{
    type:"line",
    data:{labels:years,datasets:[
      {label:"PHI",data:priv,borderColor:"#1e3a8a",pointRadius:0},
      {label:"MC",data:pub,borderColor:"#0d9488",pointRadius:0}
    ]},
    options:{scales:{x:{title:{display:true,text:"Year"}},
                     y:{title:{display:true,text:"Coverage (%)"},min:0,max:100}}}
  });

  ratioChart=new Chart(document.getElementById("ratioChart"),{
    type:"line",
    data:{labels:years,datasets:[
      {label:"Success Ratio",data:ratio,borderColor:"#2563eb",pointRadius:0}
    ]},
    options:{scales:{x:{title:{display:true,text:"Year"}},
                     y:{title:{display:true,text:"PHI / Total"},min:0,max:1}}}
  });

  const xs=[...Array(101)].map((_,i)=>i/100);
  allocChart=new Chart(document.getElementById("allocationChart"),{
    type:"line",
    data:{labels:xs,datasets:[
      {label:"Allocation",data:xs,borderColor:"#0f766e",pointRadius:0}
    ]},
    options:{scales:{x:{title:{display:true,text:"Success Ratio"}},
                     y:{title:{display:true,text:"Resource Share"},min:0,max:1}}}
  });
}

function run(){
  if(timer)clearInterval(timer);
  let p=histPriv[HIST_END],m=histPub[HIST_END],y=HIST_END+1;
  timer=setInterval(()=>{
    if(y>END){clearInterval(timer);return;}
    const r=p/(p+m);
    p+=RES*r-p*LOSS_P;
    m+=RES*(1-r)-m*LOSS_M;
    const i=years.indexOf(y);
    covChart.data.datasets[0].data[i]=p;
    covChart.data.datasets[1].data[i]=m;
    ratioChart.data.datasets[0].data[i]=p/(p+m);
    covChart.update();ratioChart.update();
    y++;
  },150);
}

function reset(){
  if(timer)clearInterval(timer);
  covChart.destroy();ratioChart.destroy();allocChart.destroy();
  buildCharts();
}

window.onload=()=>{
  buildCharts();
  runBtn.onclick=run;
  resetBtn.onclick=reset;
};
</script>
</body>
</html>


